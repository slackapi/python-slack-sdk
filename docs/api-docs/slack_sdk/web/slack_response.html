<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>slack_sdk.web.slack_response API documentation</title>
<meta name="description" content="A Python module for interacting and consuming responses from Slack." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>slack_sdk.web.slack_response</code></h1>
</header>
<section id="section-intro">
<p>A Python module for interacting and consuming responses from Slack.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;A Python module for interacting and consuming responses from Slack.&#34;&#34;&#34;

import logging
from typing import Any, Optional, TypeVar, Union, overload

import slack_sdk.errors as e
from .internal_utils import _next_cursor_is_present

T = TypeVar(&#34;T&#34;)


class SlackResponse:
    &#34;&#34;&#34;An iterable container of response data.

    Attributes:
        data (dict): The json-encoded content of the response. Along
            with the headers and status code information.

    Methods:
        validate: Check if the response from Slack was successful.
        get: Retrieves any key from the response data.
        next: Retrieves the next portion of results,
            if &#39;next_cursor&#39; is present.

    Example:
    ```python
    import os
    import slack

    client = slack.WebClient(token=os.environ[&#39;SLACK_API_TOKEN&#39;])

    response1 = client.auth_revoke(test=&#39;true&#39;)
    assert not response1[&#39;revoked&#39;]

    response2 = client.auth_test()
    assert response2.get(&#39;ok&#39;, False)

    users = []
    for page in client.users_list(limit=2):
        users = users + page[&#39;members&#39;]
    ```

    Note:
        Some responses return collections of information
        like channel and user lists. If they do it&#39;s likely
        that you&#39;ll only receive a portion of results. This
        object allows you to iterate over the response which
        makes subsequent API requests until your code hits
        &#39;break&#39; or there are no more results to be found.

        Any attributes or methods prefixed with _underscores are
        intended to be &#34;private&#34; internal use only. They may be changed or
        removed at anytime.
    &#34;&#34;&#34;

    def __init__(
        self,
        *,
        client,
        http_verb: str,
        api_url: str,
        req_args: dict,
        data: Union[dict, bytes],  # data can be binary data
        headers: dict,
        status_code: int,
    ):
        self.http_verb = http_verb
        self.api_url = api_url
        self.req_args = req_args
        self.data = data
        self.headers = headers
        self.status_code = status_code
        self._initial_data = data
        self._iteration = None  # for __iter__ &amp; __next__
        self._client = client
        self._logger = logging.getLogger(__name__)

    def __str__(self):
        &#34;&#34;&#34;Return the Response data if object is converted to a string.&#34;&#34;&#34;
        if isinstance(self.data, bytes):
            raise ValueError(&#34;As the response.data is binary data, this operation is unsupported&#34;)
        return f&#34;{self.data}&#34;

    def __contains__(self, key: str) -&gt; bool:
        return self.get(key) is not None

    def __getitem__(self, key):
        &#34;&#34;&#34;Retrieves any key from the data store.

        Note:
            This is implemented so users can reference the
            SlackResponse object like a dictionary.
            e.g. response[&#34;ok&#34;]

        Returns:
            The value from data or None.
        &#34;&#34;&#34;
        if isinstance(self.data, bytes):
            raise ValueError(&#34;As the response.data is binary data, this operation is unsupported&#34;)
        if self.data is None:
            raise ValueError(&#34;As the response.data is empty, this operation is unsupported&#34;)
        return self.data.get(key, None)

    def __iter__(self):
        &#34;&#34;&#34;Enables the ability to iterate over the response.
        It&#39;s required for the iterator protocol.

        Note:
            This enables Slack cursor-based pagination.

        Returns:
            (SlackResponse) self
        &#34;&#34;&#34;
        self._iteration = 0
        self.data = self._initial_data
        return self

    def __next__(self):
        &#34;&#34;&#34;Retrieves the next portion of results, if &#39;next_cursor&#39; is present.

        Note:
            Some responses return collections of information
            like channel and user lists. If they do it&#39;s likely
            that you&#39;ll only receive a portion of results. This
            method allows you to iterate over the response until
            your code hits &#39;break&#39; or there are no more results
            to be found.

        Returns:
            (SlackResponse) self
                With the new response data now attached to this object.

        Raises:
            SlackApiError: If the request to the Slack API failed.
            StopIteration: If &#39;next_cursor&#39; is not present or empty.
        &#34;&#34;&#34;
        if isinstance(self.data, bytes):
            raise ValueError(&#34;As the response.data is binary data, this operation is unsupported&#34;)
        self._iteration += 1
        if self._iteration == 1:
            return self
        if _next_cursor_is_present(self.data):  # skipcq: PYL-R1705
            params = self.req_args.get(&#34;params&#34;, {})
            if params is None:
                params = {}
            next_cursor = self.data.get(&#34;response_metadata&#34;, {}).get(&#34;next_cursor&#34;) or self.data.get(&#34;next_cursor&#34;)
            params.update({&#34;cursor&#34;: next_cursor})
            self.req_args.update({&#34;params&#34;: params})

            # This method sends a request in a synchronous way
            response = self._client._request_for_pagination(  # skipcq: PYL-W0212
                api_url=self.api_url, req_args=self.req_args
            )
            self.data = response[&#34;data&#34;]
            self.headers = response[&#34;headers&#34;]
            self.status_code = response[&#34;status_code&#34;]
            return self.validate()
        else:
            raise StopIteration

    @overload
    def get(self, key: str, default: None = None) -&gt; Optional[Any]:
        ...

    @overload
    def get(self, key: str, default: T) -&gt; T:
        ...

    def get(self, key, default=None):
        &#34;&#34;&#34;Retrieves any key from the response data.

        Note:
            This is implemented so users can reference the
            SlackResponse object like a dictionary.
            e.g. response.get(&#34;ok&#34;, False)

        Returns:
            The value from data or the specified default.
        &#34;&#34;&#34;
        if isinstance(self.data, bytes):
            raise ValueError(&#34;As the response.data is binary data, this operation is unsupported&#34;)
        if self.data is None:
            return None
        return self.data.get(key, default)

    def validate(self):
        &#34;&#34;&#34;Check if the response from Slack was successful.

        Returns:
            (SlackResponse)
                This method returns it&#39;s own object. e.g. &#39;self&#39;

        Raises:
            SlackApiError: The request to the Slack API failed.
        &#34;&#34;&#34;
        if self.status_code == 200 and self.data and (isinstance(self.data, bytes) or self.data.get(&#34;ok&#34;, False)):
            return self
        msg = f&#34;The request to the Slack API failed. (url: {self.api_url})&#34;
        raise e.SlackApiError(message=msg, response=self)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="slack_sdk.web.slack_response.SlackResponse"><code class="flex name class">
<span>class <span class="ident">SlackResponse</span></span>
<span>(</span><span>*, client, http_verb: str, api_url: str, req_args: dict, data: Union[dict, bytes], headers: dict, status_code: int)</span>
</code></dt>
<dd>
<div class="desc"><p>An iterable container of response data.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>data</code></strong> :&ensp;<code>dict</code></dt>
<dd>The json-encoded content of the response. Along
with the headers and status code information.</dd>
</dl>
<h2 id="methods">Methods</h2>
<p>validate: Check if the response from Slack was successful.
get: Retrieves any key from the response data.
next: Retrieves the next portion of results,
if 'next_cursor' is present.</p>
<p>Example:</p>
<pre><code class="language-python">import os
import slack

client = slack.WebClient(token=os.environ['SLACK_API_TOKEN'])

response1 = client.auth_revoke(test='true')
assert not response1['revoked']

response2 = client.auth_test()
assert response2.get('ok', False)

users = []
for page in client.users_list(limit=2):
    users = users + page['members']
</code></pre>
<h2 id="note">Note</h2>
<p>Some responses return collections of information
like channel and user lists. If they do it's likely
that you'll only receive a portion of results. This
object allows you to iterate over the response which
makes subsequent API requests until your code hits
'break' or there are no more results to be found.</p>
<p>Any attributes or methods prefixed with _underscores are
intended to be "private" internal use only. They may be changed or
removed at anytime.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class SlackResponse:
    &#34;&#34;&#34;An iterable container of response data.

    Attributes:
        data (dict): The json-encoded content of the response. Along
            with the headers and status code information.

    Methods:
        validate: Check if the response from Slack was successful.
        get: Retrieves any key from the response data.
        next: Retrieves the next portion of results,
            if &#39;next_cursor&#39; is present.

    Example:
    ```python
    import os
    import slack

    client = slack.WebClient(token=os.environ[&#39;SLACK_API_TOKEN&#39;])

    response1 = client.auth_revoke(test=&#39;true&#39;)
    assert not response1[&#39;revoked&#39;]

    response2 = client.auth_test()
    assert response2.get(&#39;ok&#39;, False)

    users = []
    for page in client.users_list(limit=2):
        users = users + page[&#39;members&#39;]
    ```

    Note:
        Some responses return collections of information
        like channel and user lists. If they do it&#39;s likely
        that you&#39;ll only receive a portion of results. This
        object allows you to iterate over the response which
        makes subsequent API requests until your code hits
        &#39;break&#39; or there are no more results to be found.

        Any attributes or methods prefixed with _underscores are
        intended to be &#34;private&#34; internal use only. They may be changed or
        removed at anytime.
    &#34;&#34;&#34;

    def __init__(
        self,
        *,
        client,
        http_verb: str,
        api_url: str,
        req_args: dict,
        data: Union[dict, bytes],  # data can be binary data
        headers: dict,
        status_code: int,
    ):
        self.http_verb = http_verb
        self.api_url = api_url
        self.req_args = req_args
        self.data = data
        self.headers = headers
        self.status_code = status_code
        self._initial_data = data
        self._iteration = None  # for __iter__ &amp; __next__
        self._client = client
        self._logger = logging.getLogger(__name__)

    def __str__(self):
        &#34;&#34;&#34;Return the Response data if object is converted to a string.&#34;&#34;&#34;
        if isinstance(self.data, bytes):
            raise ValueError(&#34;As the response.data is binary data, this operation is unsupported&#34;)
        return f&#34;{self.data}&#34;

    def __contains__(self, key: str) -&gt; bool:
        return self.get(key) is not None

    def __getitem__(self, key):
        &#34;&#34;&#34;Retrieves any key from the data store.

        Note:
            This is implemented so users can reference the
            SlackResponse object like a dictionary.
            e.g. response[&#34;ok&#34;]

        Returns:
            The value from data or None.
        &#34;&#34;&#34;
        if isinstance(self.data, bytes):
            raise ValueError(&#34;As the response.data is binary data, this operation is unsupported&#34;)
        if self.data is None:
            raise ValueError(&#34;As the response.data is empty, this operation is unsupported&#34;)
        return self.data.get(key, None)

    def __iter__(self):
        &#34;&#34;&#34;Enables the ability to iterate over the response.
        It&#39;s required for the iterator protocol.

        Note:
            This enables Slack cursor-based pagination.

        Returns:
            (SlackResponse) self
        &#34;&#34;&#34;
        self._iteration = 0
        self.data = self._initial_data
        return self

    def __next__(self):
        &#34;&#34;&#34;Retrieves the next portion of results, if &#39;next_cursor&#39; is present.

        Note:
            Some responses return collections of information
            like channel and user lists. If they do it&#39;s likely
            that you&#39;ll only receive a portion of results. This
            method allows you to iterate over the response until
            your code hits &#39;break&#39; or there are no more results
            to be found.

        Returns:
            (SlackResponse) self
                With the new response data now attached to this object.

        Raises:
            SlackApiError: If the request to the Slack API failed.
            StopIteration: If &#39;next_cursor&#39; is not present or empty.
        &#34;&#34;&#34;
        if isinstance(self.data, bytes):
            raise ValueError(&#34;As the response.data is binary data, this operation is unsupported&#34;)
        self._iteration += 1
        if self._iteration == 1:
            return self
        if _next_cursor_is_present(self.data):  # skipcq: PYL-R1705
            params = self.req_args.get(&#34;params&#34;, {})
            if params is None:
                params = {}
            next_cursor = self.data.get(&#34;response_metadata&#34;, {}).get(&#34;next_cursor&#34;) or self.data.get(&#34;next_cursor&#34;)
            params.update({&#34;cursor&#34;: next_cursor})
            self.req_args.update({&#34;params&#34;: params})

            # This method sends a request in a synchronous way
            response = self._client._request_for_pagination(  # skipcq: PYL-W0212
                api_url=self.api_url, req_args=self.req_args
            )
            self.data = response[&#34;data&#34;]
            self.headers = response[&#34;headers&#34;]
            self.status_code = response[&#34;status_code&#34;]
            return self.validate()
        else:
            raise StopIteration

    @overload
    def get(self, key: str, default: None = None) -&gt; Optional[Any]:
        ...

    @overload
    def get(self, key: str, default: T) -&gt; T:
        ...

    def get(self, key, default=None):
        &#34;&#34;&#34;Retrieves any key from the response data.

        Note:
            This is implemented so users can reference the
            SlackResponse object like a dictionary.
            e.g. response.get(&#34;ok&#34;, False)

        Returns:
            The value from data or the specified default.
        &#34;&#34;&#34;
        if isinstance(self.data, bytes):
            raise ValueError(&#34;As the response.data is binary data, this operation is unsupported&#34;)
        if self.data is None:
            return None
        return self.data.get(key, default)

    def validate(self):
        &#34;&#34;&#34;Check if the response from Slack was successful.

        Returns:
            (SlackResponse)
                This method returns it&#39;s own object. e.g. &#39;self&#39;

        Raises:
            SlackApiError: The request to the Slack API failed.
        &#34;&#34;&#34;
        if self.status_code == 200 and self.data and (isinstance(self.data, bytes) or self.data.get(&#34;ok&#34;, False)):
            return self
        msg = f&#34;The request to the Slack API failed. (url: {self.api_url})&#34;
        raise e.SlackApiError(message=msg, response=self)</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="slack_sdk.web.slack_response.SlackResponse.get"><code class="name flex">
<span>def <span class="ident">get</span></span>(<span>self, key, default=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Retrieves any key from the response data.</p>
<h2 id="note">Note</h2>
<p>This is implemented so users can reference the
SlackResponse object like a dictionary.
e.g. response.get("ok", False)</p>
<h2 id="returns">Returns</h2>
<p>The value from data or the specified default.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get(self, key, default=None):
    &#34;&#34;&#34;Retrieves any key from the response data.

    Note:
        This is implemented so users can reference the
        SlackResponse object like a dictionary.
        e.g. response.get(&#34;ok&#34;, False)

    Returns:
        The value from data or the specified default.
    &#34;&#34;&#34;
    if isinstance(self.data, bytes):
        raise ValueError(&#34;As the response.data is binary data, this operation is unsupported&#34;)
    if self.data is None:
        return None
    return self.data.get(key, default)</code></pre>
</details>
</dd>
<dt id="slack_sdk.web.slack_response.SlackResponse.validate"><code class="name flex">
<span>def <span class="ident">validate</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Check if the response from Slack was successful.</p>
<h2 id="returns">Returns</h2>
<p>(SlackResponse)
This method returns it's own object. e.g. 'self'</p>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>SlackApiError</code></dt>
<dd>The request to the Slack API failed.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate(self):
    &#34;&#34;&#34;Check if the response from Slack was successful.

    Returns:
        (SlackResponse)
            This method returns it&#39;s own object. e.g. &#39;self&#39;

    Raises:
        SlackApiError: The request to the Slack API failed.
    &#34;&#34;&#34;
    if self.status_code == 200 and self.data and (isinstance(self.data, bytes) or self.data.get(&#34;ok&#34;, False)):
        return self
    msg = f&#34;The request to the Slack API failed. (url: {self.api_url})&#34;
    raise e.SlackApiError(message=msg, response=self)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="slack_sdk.web" href="index.html">slack_sdk.web</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="slack_sdk.web.slack_response.SlackResponse" href="#slack_sdk.web.slack_response.SlackResponse">SlackResponse</a></code></h4>
<ul class="">
<li><code><a title="slack_sdk.web.slack_response.SlackResponse.get" href="#slack_sdk.web.slack_response.SlackResponse.get">get</a></code></li>
<li><code><a title="slack_sdk.web.slack_response.SlackResponse.validate" href="#slack_sdk.web.slack_response.SlackResponse.validate">validate</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>